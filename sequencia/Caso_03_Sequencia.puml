@startuml

title Caso 03 - Responder Enquete

actor Aluno

participant ":TelaEnquete" as TE <<boundary>>
participant ":EnqueteController" as EC <<controller>>
participant ":Enquete" as E <<entity>>
participant ":Aluno" as A <<entity>>
participant ":RespostaEnquete" as RE <<entity>>

Aluno -> TE: acessarTelaEnquete()
activate TE

TE -> TE: exibirEnquete()

TE -> EC: carregarEnquete(data)
activate EC

EC -> E: getData()
activate E
E --> EC: data
deactivate E

EC -> E: isAtiva()
activate E
E --> EC: ativa
deactivate E

EC --> TE: enquete
deactivate EC

TE -> TE: obterDataSelecionada()
TE -> TE: obterOpcaoTrajeto()

TE -> EC: registrarResposta(aluno, data, opcao)
activate EC

EC -> A: getNome()
activate A
A --> EC: nome
deactivate A

create RE
EC -> RE: new(aluno, data, opcao)
activate RE
RE --> EC: resposta
deactivate RE

EC -> EC: atualizarListaEmbarque()

EC --> TE: sucesso
deactivate EC

TE -> TE: exibirConfirmacao()

TE --> Aluno: confirmacao
deactivate TE

@enduml

' ============================================
' JUSTIFICATIVA DOS PADRÕES NA SEQUÊNCIA
' ============================================
'
' GRASP Controller:
' - EnqueteController coordena o carregamento da enquete
'   e o registro da resposta do aluno.
'
' Information Expert (IE):
' - Enquete conhece sua data e status de ativação.
' - RespostaEnquete armazena a opção de trajeto do aluno.
' - Aluno fornece seus próprios dados.
'
' Low Coupling:
' - TelaEnquete não manipula entidades diretamente,
'   delegando toda lógica ao controller.
'
' High Cohesion:
' - EnqueteController foca apenas no gerenciamento de enquetes.
' - Cada entidade tem responsabilidade única e bem definida.
'
' ATORES:
' - Aluno: Responde a enquete informando seu trajeto do dia
