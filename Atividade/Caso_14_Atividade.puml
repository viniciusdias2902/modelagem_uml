@startuml
start
:Acessar tela de solicitação de troca;
:Carregar pontos disponíveis na rota;
:Buscar pontos da rota no repositório;
:Exibir pontos disponíveis ao aluno;
:Selecionar novo ponto desejado;
:Informar justificativa da troca;
:Confirmar solicitação;
:Validar solicitação;
:Obter ponto atual do aluno;
if (Ponto desejado é diferente do atual?) then (sim)
  if (Existe solicitação pendente?) then (sim)
    :Exibir erro de solicitação pendente;
    stop
  else (não)
    :Criar nova solicitação;
    :Salvar solicitação no repositório;
    fork
      :Criar evento SOLICITACAO_CRIADA;
      :Notificar observers;
      while (Há observers registrados?) is (sim)
        :Obter motoristas da rota;
        :Enviar notificação aos motoristas;
      endwhile (não)
    fork again
      :Exibir confirmação ao aluno;
    end fork
  endif
else (não)
  :Exibir erro de ponto igual ao atual;
endif
stop
@enduml
