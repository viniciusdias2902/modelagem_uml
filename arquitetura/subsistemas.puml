@startuml Subsistemas

package "Subsistema de Autenticação e Gestão de Usuários" <<subsystem>> as AUTH {
  [Gestão de Usuários]
  [Autenticação]
  [Factory de Usuários]
}

package "Subsistema de Gestão de Rotas e Transporte" <<subsystem>> as ROTA {
  [Gestão de Rotas]
  [Gestão de Pontos de Embarque]
  [Gestão de Enquetes]
  [Controle de Posicionamento]
}

package "Subsistema Financeiro" <<subsystem>> as FIN {
  [Gestão de Pagamentos]
  [Geração de Comprovantes]
  [Exportação de Relatórios]
  [Registro Financeiro]
}

package "Subsistema de Solicitações" <<subsystem>> as SOL {
  [Criação de Solicitações]
  [Análise de Solicitações]
  [Gestão de Status]
}

ROTA ..> AUTH : <<usa>>
SOL ..> AUTH : <<usa>>
SOL ..> ROTA : <<usa>>
FIN ..> AUTH : <<usa>>

note right of AUTH
  <b>Responsabilidades:</b>
  - Cadastro de usuários
  - Auto-cadastro de alunos
  - Autenticação e sessões
  - Factory polimórfica
end note

note right of ROTA
  <b>Responsabilidades:</b>
  - Gestão de rotas e pontos
  - Controle de trajeto
  - Enquetes de trajeto
  - Cálculo de próximo ponto
end note

note right of FIN
  <b>Responsabilidades:</b>
  - Registro de pagamentos
  - Cálculo de saldo
  - Geração de comprovantes (PDF/Word)
  - Exportação de planilhas
end note

note right of SOL
  <b>Responsabilidades:</b>
  - Solicitação de troca de ponto
  - Aprovação/rejeição por motorista
  - Atualização de ponto do aluno
  - Histórico de solicitações
end note

@enduml